#!/usr/bin/expect
set login [lindex $argv 0]
set pass [lindex $argv 1]
set server [lrange $argv 2 4]
set serverpass "dgjujytpfrhjkbrjv"
set env(TERM) vt100
set timeout 10
spawn /usr/bin/ssh $server
set i 0

expect {
"*yes/no*" {
send "yes\r"
} timeout {
exit 2
} "*password*" {
send "$serverpass\r"
set i 1
}
}

if { $i != 1 } {
expect "*password*"
send "$serverpass\r"
}
expect {
"# *" {
send "multipass $login\r"
expect -re "(.*)\n"
expect -re "(.*)\r\n"
set md5pass $expect_out(1,string)
expect "closed*"
} timeout {
exit 2
}
}
if { [string compare $pass $md5pass] == 0} { exit 1 }
exit 0
